<!DOCTYPE html> <html lang="en"> <head> <meta charset="UTF-8"> <meta name="viewport" content="width=device-width, initial -scale=1.0"> <title>授权登录</title> </head> <body> <h1>选择登录方式</h1> <ul> <li><a href="/auth/wechat">微信登录</a></li> <li><a href="/auth/telegram">电报登录</a></li> <li><a href="/auth/phone">手机号登录</a></li> < li><a href="/auth/facebook">Facebook 登录</a></li> <li><a href="/auth/viber">Viber 登录</a></li> <li> <a href="/auth/line">线路登录</a></li> <li><a href="/auth/whatsapp">WhatsApp登录</a></li> <li><a href="/auth/twitter">Twitter登录</a></li> </ul> </body> </html> 微信登录：用户点击“微信登录”后，跳转到微信的授权页面。微信授权后，返回一个code，通过code获取用户的access_token和用户信息。 @app.route('/auth/wechat') def wechat_login(): # 构造微信授权URL wechat_auth_url = f"https://open.weixin.qq.com/connect/oauth2/authorize?appid={APP_ID}&redirect_uri={REDIRECT_URI}&response_type=code&scope=snsapi_userinfo&state=STATE#wechat_redirect" return redirect(wechat_auth_url) Facebook登录： 类似地，使用Facebook的OAuth 2.0流程。@app.route('/auth/facebook') def facebook_login(): facebook_auth_url = f"https://www.facebook.com/v12.0/dialog/oauth?client_id={CLIENT_ID}&redirect_uri={REDIRECT_URI}&state={STATE}" return redirect(facebook_auth_url) 手机号登录： 用户输入手机号， @app.route('/auth/phone',methods=['GET', 'POST']) def phone_login(): if request.method == 'POST': Phone = request.form['phone'] code = request.form['code'] # 验证码验证逻辑 if verify_code(phone, code): # 登录成功 return "登录成功" else: return "验证码错误" return render_template('phone_login.html')
